!function(t){function e(i){if(n[i])return n[i].exports;var o=n[i]={exports:{},id:i,loaded:!1};return t[i].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";function i(t){return h.call(arguments,1).forEach(function(e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])}),t}function o(t,e){var n,i,o,r;return function(){n=this,i=arguments,o=Date.now();var a=function(){var s=Date.now()-o;return s<e?void(r=setTimeout(a,e-s)):(r=null,t.apply(n,i))};r||(r=setTimeout(a,e))}}function r(t){return t.charAt(0).toUpperCase()+t.slice(1)}function a(t){return"on"+r(t)}function s(t,e,n){p.call(e.split(" "),function(e){t.addEventListener(e,n)})}function c(t){return[t,{alt:t.altKey,ctrl:t.ctrlKey,meta:t.metaKey||"Meta"===t.key,shift:t.shiftKey}]}function u(){var t=h.call(arguments);return t.length&&d.execCommand.apply(d,t)}function l(t,e){if(1!==t.nodeType)throw new Error("Must provide a valid Element Node.");if(!(v in d.body))throw new Error("Your browser does not support the `contenteditable` attribute. For more: http://caniuse.com/#feat=contenteditable");this.el=t,this.opts=i({airbar:!1,toolbar:!1,input:!1,onBlur:b,onFocus:b,onKeydown:b,onKeyup:b,onKeypress:b,onSelection:b,onSave:b,onSync:b,snapSelection:!0,throttle:250},e||{});var n=this;p.call(["blur","focus","mouseup","keydown"],function(e){s(t,e,n[a(e)].bind(n))}),p.call(["keyup","keydown","keypress"],function(e){s(t,e,o(function(t){n.opts[a(t.type)].apply(n,c(t))},n.opts.throttle))}),p.call(["save","sync"],function(e){var i="auto"+r(e),c=n.opts[i];s(t,"editor_"+e,n.opts[a(e)].bind(n)),c&&(c=n.opts[i]=Math.max(c,1500),s(t,"editor_auto"+e,o(n[e].bind(n),c)))});var u=[];p.call([this.opts.toolbar,this.opts.airbar],function(t){t&&(u=u.concat(h.call(t.getElementsByTagName("button"))))});var l=this.onBtnClick.bind(this);p.call(u,function(t){s(t,g,l)}),n.buttons=u}var f=n(1),d=document,h=[].slice,p=[].forEach,g="click touch",v="contentEditable",m={u:"u",b:"b",i:"i","]":"in","[":"out",s55:"ol",s56:"ul",s69:"center",s74:"full",s76:"left",s82:"right"},y={ul:["insertUnorderedList"],ol:["insertOrderedList"],u:["underline",1],b:["bold",1],i:["italic",1],a:["createLink",1],sub:["subscript",1],sup:["superscript",1],strike:["strikeThrough",1],center:["justifyCenter"],right:["justifyRight"],left:["justifyLeft"],full:["justifyFull"],out:["outdent"],"in":["indent"]},b=function(){};l.prototype={onBlur:function(t){return this.buttons.indexOf(t.relatedTarget)===-1&&(this.sync(),this.hideAirbar(),void this.opts.onBlur(t))},onFocus:function(t){this.hasSelection()&&this.showAirbar(),this.opts.onFocus(t)},onKeydown:function(t){if(t.metaKey&&"Meta"!==t.key){var e=t.shiftKey?"s"+t.keyCode:t.key;this.runCommand(m[e],t)}if(13===t.keyCode){var n=f.getRange().startContainer;("DIV"===n.nodeName||"#text"===n.nodeName&&"DIV"===n.parentNode.nodeName)&&u("formatBlock",null,"p")}this.opts.autoSave&&this.emit("autosave"),this.opts.autoSync&&this.emit("autosync")},onBtnClick:function(t){var e=t.target.getAttribute("data-tag");switch(e){case"a":return this.insertLink();case"img":return this.insertImage();default:this.runCommand(e,t)}},onMouseup:function(){var t=this.hasSelection();t?this.onSelection(t):this.hideAirbar()},onSelection:function(t){this.opts.snapSelection&&f.snapSelected(t),this.opts.onSelection(t),this.showAirbar()},hasSelection:function(){var t=f.getSelection();return!f.isCollapsed(t)&&f.isWithin(this.el,t)&&t},expandSelection:function(){f.expandToWord()},emit:function(t){if(t){var e="editor_"+t,n=d.createEvent("Event");n.initEvent(e,1,1),this.el.dispatchEvent(n)}},save:function(){this.emit("save")},sync:function(){var t=this.opts.input;t&&(t.value=this.minifyHTML()),this.emit("sync")},runCommand:function(t,e){var n=y[t];t&&n&&(e&&e.preventDefault(),n[1]&&!this.hasSelection()&&this.expandSelection(),u(n[0]))},insertLink:function(){console.log("inside insertLink")},insertImage:function(){console.log("inside insertImage")},getSelectedHTML:function(){return f.getHTML(this.hasSelection())},getSelectedNodes:function(){return f.getNodes(this.hasSelection())},setHTML:function(t){this.el.innerHTML=t||""},getHTML:function(){return this.el.innerHTML},safeHTML:function(){return this.getHTML().replace(/<script[^>]*>[\S\s]*?<\/script[^>]*>/gi,"")},cleanHTML:function(){return this.getHTML().replace(/\n|<br[\/]?>/g,"").replace(/<div><\/div>|<p><\/p>/g,"").replace(/&nbsp;/g," ")},minifyHTML:function(){return this.cleanHTML().replace(/[\t\t]+</g,"<").replace(/>[\t\t]+</g,"><").replace(/>[\t\t]+$/g,">").replace(/\s\s+/g," ")},removeTags:function(){},removeStyles:function(){},showAirbar:function(){var t=this.opts.airbar;t&&!this.airActive&&(t.classList.add("active"),this.airActive=!0)},hideAirbar:function(){var t=this.opts.airbar;t&&this.airActive&&(t.classList.remove("active"),this.airActive=!1)},toggleAirbar:function(){var t=this.airActive?"hide":"show";this[t+"Airbar"]()}},window.Editor=l},function(t,e,n){var i,o,r;!function(n,a){o=[],i=a,r="function"==typeof i?i.apply(e,o):i,!(void 0!==r&&(t.exports=r))}(this,function(){"use strict";function t(t,e){if(t.firstChild)return t.firstChild;for(;t;){if(t===e)return null;if(t.nextSibling)return t.nextSibling;t=t.parentNode}}function e(){return v.getSelection()||m.selection}function n(t){return t=t||e(),t.rangeCount>0?t.getRangeAt(0):null}function i(t,n){t&&(n=n||e(),n.removeAllRanges(),n.addRange(t))}function o(t){if(t=t||e(),!t.rangeCount)return!1;for(var n=t.getRangeAt(0).cloneRange(),i=n.getClientRects?n.getClientRects():[],o=0;o<i.length;++o){var r=i[o];if(r.left&&r.top&&r.right&&r.bottom)return{left:parseInt(r.left,10),top:parseInt(r.top,10),width:parseInt(r.right-r.left,10),height:parseInt(r.bottom-r.top,10)}}return!1}function r(e){var i=n(e);if(!i)return[];var o=i.startContainer,r=i.endContainer;if(o===r)return[o];for(var a=[];o&&o!==r;)a.push(o=t(o));for(o=i.startContainer;o&&o!==i.commonAncestorContainer;)a.unshift(o),o=o.parentNode;return a}function a(t){if(t=t||e(),!t.rangeCount||t.isCollapsed)return null;for(var n=t.rangeCount,i=m.createElement("div"),o=0;o<n;++o)i.appendChild(t.getRangeAt(o).cloneContents());return i.innerHTML}function s(t){return(t||v.getSelection()).isCollapsed}function c(t){(t||v.getSelection()).collapseToStart()}function u(t){(t||v.getSelection()).collapseToEnd()}function l(t,n){return n=n||e(),t.contains(n.anchorNode)&&t.contains(n.focusNode)}function f(t,e){var n=m.createRange();n.selectNodeContents(t),n.collapse(!1),i(n,e)}function d(t){if(t=t||e(),t.modify)c(t),t.modify("move","backward","word"),t.modify("extend","forward","word");else if("Control"!==t.type){var n=t.createRange();n.collapse(!0),n.expand("word")}}function h(t){t=t||e();var o=n(t);d(t);var r=t.toString();return i(o),r}function p(t){if(t=t||e(),!s(t)){var n=m.createRange();return n.setStart(t.anchorNode,t.anchorOffset),n.setEnd(t.focusNode,t.focusOffset),n.detach(),n.collapsed}}function g(t){if(t=t||e(),!s(t)){var n=t.focusNode,i=t.focusOffset,o=["forward","backward"];p(t)&&o.reverse(),t.collapse(t.anchorNode,t.anchorOffset),t.modify("move",o[0],"character"),t.modify("move",o[1],"word"),t.extend(n,i),t.modify("extend",o[1],"character"),t.modify("extend",o[0],"word")}}var v=window,m=document,y="0.3.1";return{getSelection:e,getRange:n,setRange:i,getRect:o,getNodes:r,getHTML:a,isCollapsed:s,isBackwards:p,collapseStart:c,collapseEnd:u,isWithin:l,forceWithin:f,expandToWord:d,getCaretWord:h,snapSelected:g,version:y}})}]);
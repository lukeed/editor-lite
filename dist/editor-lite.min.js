!function(t){function e(i){if(n[i])return n[i].exports;var o=n[i]={exports:{},id:i,loaded:!1};return t[i].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";function i(t){return p.call(arguments,1).forEach(function(e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])}),t}function o(t,e){var n,i,o,r;return function(){n=this,i=arguments,o=Date.now();var a=function(){var s=Date.now()-o;return s<e?void(r=setTimeout(a,e-s)):(r=null,t.apply(n,i))};r||(r=setTimeout(a,e))}}function r(t){return t.charAt(0).toUpperCase()+t.slice(1)}function a(t){return"on"+r(t)}function s(t,e,n){g.call(e.split(" "),function(e){t.addEventListener(e,n)})}function c(t){return[t,{alt:t.altKey,ctrl:t.ctrlKey,meta:t.metaKey||"Meta"===t[m],shift:t.shiftKey}]}function u(t,e){for(;t[b]&&e;)if(e--,t=t[b],"DIV"===t[y])return!0;return!1}function l(){var t=p.call(arguments);return t.length&&h.execCommand.apply(h,t)}function f(t,e){if(1!==t.nodeType)throw new Error("Must provide a valid Element Node.");if(!("contentEditable"in h.body))throw new Error("Your browser does not support the `contenteditable` attribute. For more: http://caniuse.com/#feat=contenteditable");this.el=t,this.opts=i({airbar:!1,toolbar:!1,input:!1,onBlur:C,onFocus:C,onKeydown:C,onKeyup:C,onKeypress:C,onSelection:C,onSave:C,onSync:C,snapSelection:!0,throttle:250},e||{});var n=this;g.call(["blur","focus","mouseup","keydown"],function(e){s(t,e,n[a(e)].bind(n))}),g.call(["keyup","keydown","keypress"],function(e){s(t,e,o(function(t){n.opts[a(t.type)].apply(n,c(t))},n.opts.throttle))}),g.call(["save","sync"],function(e){var i="auto"+r(e),c=n.opts[i];s(t,"editor_"+e,n.opts[a(e)].bind(n)),c&&(c=n.opts[i]=Math.max(c,1500),s(t,"editor_auto"+e,o(n[e].bind(n),c)))});var u=[];g.call([this.opts.toolbar,this.opts.airbar],function(t){t&&(u=u.concat(p.call(t.getElementsByTagName("button"))))});var l=this.onBtnClick.bind(this);g.call(u,function(t){s(t,v,l)}),n.buttons=u}var d=n(1),h=document,p=[].slice,g=[].forEach,v="click touch",m="keyIdentifier",y="nodeName",b="parentNode",w={85:"u",66:"b",73:"i",221:"in",219:"out",s55:"ol",s56:"ul",s69:"center",s74:"full",s76:"left",s82:"right"},S={ul:"insertUnorderedList",ol:"insertOrderedList",u:"underline",b:"bold",i:"italic",a:"createLink",sub:"subscript",sup:"superscript",strike:"strikeThrough",center:"justifyCenter",right:"justifyRight",left:"justifyLeft",full:"justifyFull",out:"outdent","in":"indent"},C=function(){};f.prototype={onBlur:function(t){return this.buttons.indexOf(t.relatedTarget)===-1&&(this.setHTML(this.cleanHTML()),this.sync(),this.hideAirbar(),void this.opts.onBlur(t))},onFocus:function(t){this.hasSelection()&&this.showAirbar(),this.opts.onFocus(t)},onKeydown:function(t){var e=t.keyCode||t.which;if(t.metaKey&&"Meta"!==t[m]){var n=t.shiftKey?"s"+e:e;this.runCommand(w[n],t)}if(13===e){var i=d.getRange().startContainer;("DIV"===i[y]||"#text"===i[y]&&u(i,4))&&l("formatBlock",0,"p")}this.opts.autoSave&&this.emit("autosave"),this.opts.autoSync&&this.emit("autosync")},onBtnClick:function(t){var e=t.target.getAttribute("data-tag");switch(e){case"a":return this.insertLink();case"img":return this.insertImage();default:this.runCommand(e,t)}},onMouseup:function(){var t=this.hasSelection();t?this.onSelection(t):this.hideAirbar()},onSelection:function(t){this.opts.snapSelection&&d.snapSelected(t),this.opts.onSelection(t),this.showAirbar()},hasSelection:function(){var t=d.getSelection();return!d.isCollapsed(t)&&d.isWithin(this.el,t)&&t},expandSelection:function(){d.expandToWord()},emit:function(t){if(t){var e="editor_"+t,n=h.createEvent("Event");n.initEvent(e,1,1),this.el.dispatchEvent(n)}},save:function(){this.emit("save")},sync:function(){var t=this.opts.input;t&&(t.value=this.minifyHTML()),this.emit("sync")},runCommand:function(t,e){var n=S[t];t&&n&&(e&&e.preventDefault(),l(n))},insertLink:function(){console.log("inside insertLink")},insertImage:function(){console.log("inside insertImage")},getSelectedHTML:function(){return d.getHTML(this.hasSelection())},getSelectedNodes:function(){return d.getNodes(this.hasSelection())},setHTML:function(t){this.el.innerHTML=t||""},getHTML:function(){return this.el.innerHTML},safeHTML:function(){return this.getHTML().replace(/<script[^>]*>[\S\s]*?<\/script[^>]*>/gi,"")},cleanHTML:function(){return this.getHTML().replace(/\n|<br[\/]?>/g,"").replace(/div>/gi,"p>").replace(/<p><\/p>/g,"").replace(/&nbsp;/g," ")},minifyHTML:function(){return this.cleanHTML().replace(/[\t\t]+</g,"<").replace(/>[\t\t]+</g,"><").replace(/>[\t\t]+$/g,">").replace(/\s\s+/g," ")},showAirbar:function(){var t=this.opts.airbar;t&&!this.airActive&&(t.classList.add("active"),this.airActive=!0)},hideAirbar:function(){var t=this.opts.airbar;t&&this.airActive&&(t.classList.remove("active"),this.airActive=!1)},toggleAirbar:function(){var t=this.airActive?"hide":"show";this[t+"Airbar"]()}},window.Editor=f},function(t,e,n){var i,o,r;!function(n,a){o=[],i=a,r="function"==typeof i?i.apply(e,o):i,!(void 0!==r&&(t.exports=r))}(this,function(){"use strict";function t(t,e){if(t.firstChild)return t.firstChild;for(;t;){if(t===e)return null;if(t.nextSibling)return t.nextSibling;t=t.parentNode}}function e(){return v.getSelection()||m.selection}function n(t){return t=t||e(),t.rangeCount>0?t.getRangeAt(0):null}function i(t,n){t&&(n=n||e(),n.removeAllRanges(),n.addRange(t))}function o(t){if(t=t||e(),!t.rangeCount)return!1;for(var n=t.getRangeAt(0).cloneRange(),i=n.getClientRects?n.getClientRects():[],o=0;o<i.length;++o){var r=i[o];if(r.left&&r.top&&r.right&&r.bottom)return{left:parseInt(r.left,10),top:parseInt(r.top,10),width:parseInt(r.right-r.left,10),height:parseInt(r.bottom-r.top,10)}}return!1}function r(e){var i=n(e);if(!i)return[];var o=i.startContainer,r=i.endContainer;if(o===r)return[o];for(var a=[];o&&o!==r;)a.push(o=t(o));for(o=i.startContainer;o&&o!==i.commonAncestorContainer;)a.unshift(o),o=o.parentNode;return a}function a(t){if(t=t||e(),!t.rangeCount||t.isCollapsed)return null;for(var n=t.rangeCount,i=m.createElement("div"),o=0;o<n;++o)i.appendChild(t.getRangeAt(o).cloneContents());return i.innerHTML}function s(t){return(t||v.getSelection()).isCollapsed}function c(t){(t||v.getSelection()).collapseToStart()}function u(t){(t||v.getSelection()).collapseToEnd()}function l(t,n){return n=n||e(),t.contains(n.anchorNode)&&t.contains(n.focusNode)}function f(t,e){var n=m.createRange();n.selectNodeContents(t),n.collapse(!1),i(n,e)}function d(t){if(t=t||e(),t.modify)c(t),t.modify("move","backward","word"),t.modify("extend","forward","word");else if("Control"!==t.type){var n=t.createRange();n.collapse(!0),n.expand("word")}}function h(t){t=t||e();var o=n(t);d(t);var r=t.toString();return i(o),r}function p(t){if(t=t||e(),!s(t)){var n=m.createRange();return n.setStart(t.anchorNode,t.anchorOffset),n.setEnd(t.focusNode,t.focusOffset),n.detach(),n.collapsed}}function g(t){if(t=t||e(),!s(t)){var n=t.focusNode,i=t.focusOffset,o=["forward","backward"];p(t)&&o.reverse(),t.collapse(t.anchorNode,t.anchorOffset),t.modify("move",o[0],"character"),t.modify("move",o[1],"word"),t.extend(n,i),t.modify("extend",o[1],"character"),t.modify("extend",o[0],"word")}}var v=window,m=document,y="0.3.1";return{getSelection:e,getRange:n,setRange:i,getRect:o,getNodes:r,getHTML:a,isCollapsed:s,isBackwards:p,collapseStart:c,collapseEnd:u,isWithin:l,forceWithin:f,expandToWord:d,getCaretWord:h,snapSelected:g,version:y}})}]);